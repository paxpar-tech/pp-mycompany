import{_ as $}from"./CopyButton.vue.3a67ca8b.js";import{L as k,x as I,h as f,d as V,O as S,N as A,r as d,b as O,J as D,w as j,e as t,D as g,W as r,X as u,I as a,Y as c,t as n,g as B,V as N}from"./entry.73f850e2.js";import{u as W}from"./usePaxparAPI.3c413b87.js";import{u as q}from"./url.6edfad5e.js";import"./index.8c8642e7.js";import"./fetch.99c3aab9.js";import"./useToast.2d2c16cf.js";const E=()=>({authenticated:!0,conf:k(()=>I().paxpar),email:f("login_email"),remember_me:f("login_remember"),logins:0}),K=t("h1",{class:"card-title"},"DEBUG Auth",-1),G={class:"card m-6 bg-blue-100 shadow-xl"},J={class:"card-body"},M=t("h2",{class:"card-title"},"Auth Settings",-1),X={class:"card-actions justify-end"},Y={class:"card m-6 bg-blue-100 shadow-xl"},z={class:"card-body"},F=t("h2",{class:"card-title"},"Login with magic email",-1),H={class:"card-actions justify-end"},Q={class:"card m-6 bg-blue-100 shadow-xl"},Z={class:"card-body"},tt=t("h2",{class:"card-title"},"Login with email/password",-1),st={class:"card-actions justify-end"},et={class:"card m-6 bg-blue-100 shadow-xl"},at={class:"card-body"},ot=t("h2",{class:"card-title"},"Login with auth providers",-1),nt={class:"card-actions justify-end"},lt={class:"card m-6 bg-blue-100 shadow-xl"},it={class:"card-body"},dt=t("h2",{class:"card-title"},"API data :",-1),rt=t("h2",{class:"card-title"},"API error :",-1),ut=t("h2",{class:"card-title"},"user = useSupabaseUser() :",-1),ct=t("div",{class:"divider"},null,-1),pt=t("h2",{class:"card-title"},"supabase backend",-1),bt=t("div",{class:"divider"},null,-1),mt=t("h2",{class:"card-title"},"useRequestURL",-1),kt=V({__name:"auth",setup(_t){const l=S(),C=A(),{backend:L}=W(),w=q(),U=w.toString().substring(0,w.toString().lastIndexOf("/")),p=d(L),b=d("http://localhost:3000/console"),{email:o}=E(),m=d(),_=d(),h=d(),x=k(()=>`${p.value}/api/auth/redirect?to=${encodeURIComponent(b.value)}`);async function R(){const{data:i,error:s}=await l.auth.signInWithPassword({email:o.value,password:m.value});h.value=s,_.value=i}async function P(){const{data:i,error:s}=await l.auth.signInWithOtp({email:o.value,options:{emailRedirectTo:x.value}});h.value=s,_.value=i}const v=async i=>{const{data:s,error:y}=await l.auth.signInWithOAuth({provider:i});h.value=y,_.value=s};return(i,s)=>{const y=$,T=N;return O(),D(T,null,{default:j(()=>[t("div",null,[K,t("div",G,[t("div",J,[M,g(" backend : "),r(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>c(p)?p.value=e:null),type:"text",placeholder:"emailRedirectTo",class:"input w-full"},null,512),[[u,a(p)]]),g(" redirectTo : "),r(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>c(b)?b.value=e:null),type:"text",placeholder:"emailRedirectTo",class:"input w-full"},null,512),[[u,a(b)]]),g(" emailRedirectTo : "+n(a(x))+" ",1),t("div",X,[t("button",{onClick:s[2]||(s[2]=e=>a(l).auth.signOut()),class:"btn btn-primary"}," Logout ")])])]),t("div",Y,[t("div",z,[F,r(t("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>c(o)?o.value=e:null),type:"text",placeholder:"email",class:"input w-full max-w-xs"},null,512),[[u,a(o)]]),t("div",H,[t("button",{onClick:s[4]||(s[4]=e=>P()),class:"btn btn-primary"},"Login")])])]),t("div",Q,[t("div",Z,[tt,r(t("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>c(o)?o.value=e:null),type:"text",placeholder:"email",class:"input w-full max-w-xs"},null,512),[[u,a(o)]]),r(t("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>c(m)?m.value=e:null),type:"text",placeholder:"password",class:"input w-full max-w-xs"},null,512),[[u,a(m)]]),t("div",st,[t("button",{onClick:s[7]||(s[7]=e=>R()),class:"btn btn-primary"},"Login")])])]),t("div",et,[t("div",at,[ot,t("div",nt,[t("button",{onClick:s[8]||(s[8]=e=>v("gitlab")),class:"btn btn-primary"}," Login with gitlab "),t("button",{onClick:s[9]||(s[9]=e=>v("github")),class:"btn btn-primary"}," Login with github "),t("button",{onClick:s[10]||(s[10]=e=>v("bitbucket")),class:"btn btn-primary"}," Login with bitbucket "),t("button",{onClick:s[11]||(s[11]=e=>v("google")),class:"btn btn-primary"}," Login with google ")])])]),t("div",lt,[t("div",it,[dt,t("pre",null,n(a(_)),1),rt,t("pre",null,n(a(h)),1),ut,t("pre",null,n(a(C)),1),ct,pt,t("p",null,"URL = "+n(a(l).supabaseUrl),1),t("p",null,[g(" key = "+n(a(l).supabaseKey)+" ",1),B(y,{content:a(l).supabaseKey},null,8,["content"])]),bt,mt,t("p",null,"url = "+n(a(w)),1),t("p",null,"urlParent = "+n(a(U)),1)])])])]),_:1})}}});export{kt as default};

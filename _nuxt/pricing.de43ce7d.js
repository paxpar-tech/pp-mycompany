import{d as T,s as U,u as V,N as H,x as I,C as P,r as c,K as z,P as D,o as O,af as S,I as u,b as a,c as i,g as k,e,t as E,W as J,X as K,f as p,n as C,J as W,j as X,M as F}from"./entry.2d2af821.js";import{_ as G}from"./main.vue.d9d12ac3.js";import"./head.vue.a04fd65a.js";import"./cell.vue.01d08b9a.js";import"./tail.vue.82f7ce93.js";const Q={key:0},Y={key:1,class:"w-full"},Z={key:0},ee={class:"body-font overflow-hidden"},te={key:0},se={key:1,class:"container px-5 py-24 mx-auto"},ae={class:"flex flex-col text-center w-full mb-20"},ne=e("h1",{class:"sm:text-4xl text-3xl font-medium title-font mb-2"},"Tarifs",-1),oe=e("p",{class:"lg:w-2/3 mx-auto leading-relaxed text-base"},"Les services sont payables mensuellement ou annuellement.",-1),ie={key:0,class:"alert alert-error shadow-lg"},re=["innerHTML"],me=T({__name:"pricing",setup(le){var h,b,f,g;const{$fetch2:q}=X(),n=U(),j=V(),M=H(),_=I();P({script:["https://js.stripe.com/v3/pricing-table.js"]});const m=(b=(h=_.paxpar)==null?void 0:h.stripe)==null?void 0:b.pricing_table_id,A=(g=(f=_.paxpar)==null?void 0:f.stripe)==null?void 0:g.publishable_key,d=c(n.query.url),v=c(parseInt(Array.isArray(n.query.sheet_name)?n.query.sheet_name[0]:`0${n.query.sheet_name}`)),r=c(!0),L=c(!0),o=c(!0),t=z({});D(d,(s,l)=>{j.push({query:{preview:"",url:s}})}),O(async()=>{n.query.preview===void 0?await N():await y()});async function N(){o.value=!0;const s=await $fetch("/data/pricing.json");console.log("do_pricing_load ...",s),Object.assign(t,s),o.value=!1}async function y(){o.value=!0;const s=await q("/api/ref/pricing/convert",{params:{preview:!0,url:d.value,sheet_name:v.value}});Object.assign(t,s),o.value=!1}return(s,l)=>{var x;const $=S("stripe-pricing-table"),B=F,R=G;return u(m)?(a(),i("div",Q,[k($,{"pricing-table-id":u(m),"publishable-key":u(A),"customer-email":(x=u(M))==null?void 0:x.email},null,8,["pricing-table-id","publishable-key","customer-email"])])):(a(),i("div",Y,[u(n).query.preview!==void 0?(a(),i("section",Z,[e("h1",null,"Preview URL sheet_name = "+E(v.value),1),J(e("textarea",{"onUpdate:modelValue":l[0]||(l[0]=w=>d.value=w),class:"textarea textarea-bordered",placeholder:"pricing excel doc URL"},null,512),[[K,d.value]]),e("button",{onClick:y,class:"btn"},"Preview")])):p("",!0),e("section",ee,[o.value?(a(),i("div",te," Chargement ... ")):p("",!0),o.value?p("",!0):(a(),i("div",se,[e("div",ae,[ne,oe,e("div",{onClick:l[1]||(l[1]=w=>r.value=!r.value),class:"flex mx-auto border-2 border-primary rounded overflow-hidden mt-6"},[e("button",{class:C([r.value?"bg-primary":"","py-1 px-4 focus:outline-none"])},"Mensuel",2),e("button",{class:C([r.value?"":"bg-primary","py-1 px-4 focus:outline-none"])},"Annuel",2)])]),t!=null&&t.msg?(a(),i("div",ie,[e("div",null,[k(B,{size:"36",name:t.msg.icon},null,8,["name"]),e("span",{innerHTML:t.msg.msg},null,8,re)])])):p("",!0),L.value?(a(),W(R,{key:1,pricing:t,monthly:r.value,class:"my-16"},null,8,["pricing","monthly"])):p("",!0)]))])]))}}});export{me as default};
